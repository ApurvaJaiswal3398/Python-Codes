{% extends 'layout.html' %}

<!-- 
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->

{% block css %}
<meta name="description" content="">
<meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
<meta name="generator" content="Jekyll v3.8.6">

<!-- <link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/dashboard/"> -->

<!-- Bootstrap core CSS -->
<link href="https://getbootstrap.com/docs/4.4/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<!-- Favicons -->
<!-- <link rel="apple-touch-icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/apple-touch-icon.png" sizes="180x180"> -->
<!-- <link rel="icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png"> -->
<!-- <link rel="icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png"> -->
<link rel="manifest" href="{{ url_for('static', filename='json/manifest.json') }}">
<link rel="mask-icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/safari-pinned-tab.svg" color="#563d7c">
<!-- <link rel="icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/favicon.ico"> -->
<meta name="msapplication-config" content="https://getbootstrap.com/docs/4.4/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#563d7c">

<style>
    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    
    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }

    .scroll{
        overflow-y: scroll;
        height: 500px;
    }
</style>
<!-- Custom styles for this template -->
<!-- <link href="{{ url_for('static', filename='css/dashboard.css') }}" rel="stylesheet"> -->
<link href="./../static/css/dashboard.css" rel="stylesheet">
{% endblock %}
<!-- </head>
<body>
<nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Company name</a>
    <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
    <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
            <a class="nav-link" href="#">Sign out</a>
        </li>
    </ul>
</nav> -->

{% block spin_dashboard %}<span class="spinner-grow spinner-grow-sm"></span>{% endblock %}

{% block body %}
{% if logged_in %}
<style>
.navbar-brand{
    background-color: #17A2B8;
    box-shadow: none;
}
</style>
<div class="container-fluid">
    <div class="row">
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link btn-outline-dark bg-light" id="home" onclick="usersTable()">
                            <span data-feather="home"></span>Users<span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn-outline-dark bg-light" id="carts" onclick="cartTable()">
                            <span data-feather="shopping-cart"></span>Carts
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn-outline-dark bg-light" id="products" onclick="productTable()">
                            <span data-feather="layers"></span>Products
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn-outline-dark bg-light" id="ccart" onclick="ccTable()">
                            <span data-feather="users"></span>Customers' Cart
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn-outline-dark bg-light" id="bill" onclick="billingTable()">
                            <span data-feather="bar-chart-2"></span>Billing
                        </a>
                    </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="/invoice">
                            <span data-feather="file"></span>
                            Integrations
                        </a>
                    </li> -->
                </ul>
                
                <!-- <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                    <span>Saved reports</span>
                    <a class="d-flex align-items-center text-muted" href="#" aria-label="Add a new report">
                        <span data-feather="plus-circle"></span>
                    </a>
                </h6>
                <ul class="nav flex-column mb-2">
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="file-text"></span>
                            Current month
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="file-text"></span>
                            Last quarter
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="file-text"></span>
                            Social engagement
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="file-text"></span>
                            Year-end sale
                        </a>
                    </li>
                </ul> -->
            </div>
        </nav>
        
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Dashboard</h1>
                <!-- <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group mr-2">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                        <span data-feather="calendar"></span>
                        This week
                    </button>
                </div> -->
            </div>
            
            <div class="chart" id="bargraph">
                <script>
                    // var graphs = {{ plot | safe }};
                    // Plotly.plot('bargraph',graphs,{});
                </script>
            </div>
            <!-- Hello<br>Hello<br>Hello<br>Hello<br>Hello<br>Hello<br>

            {% for id in ids %}
                <h3>{{ id }}</h3>
                <div id="{{ id }}"></div>
            {% endfor %} -->
            

            <!-- <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas> -->
            
            <!-- <h2>Section title</h2>
            <div class="table-responsive">
                <table class="table table-striped table-sm">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Header</th>
                            <th>Header</th>
                            <th>Header</th>
                            <th>Header</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1,001</td>
                            <td>Lorem</td>
                            <td>ipsum</td>
                            <td>dolor</td>
                            <td>sit</td>
                        </tr>
                        <tr>
                            <td>1,002</td>
                            <td>amet</td>
                            <td>consectetur</td>
                            <td>adipiscing</td>
                            <td>elit</td>
                        </tr>
                        <tr>
                            <td>1,003</td>
                            <td>Integer</td>
                            <td>nec</td>
                            <td>odio</td>
                            <td>Praesent</td>
                        </tr>
                        <tr>
                            <td>1,003</td>
                            <td>libero</td>
                            <td>Sed</td>
                            <td>cursus</td>
                            <td>ante</td>
                        </tr>
                        <tr>
                            <td>1,004</td>
                            <td>dapibus</td>
                            <td>diam</td>
                            <td>Sed</td>
                            <td>nisi</td>
                        </tr>
                        <tr>
                            <td>1,005</td>
                            <td>Nulla</td>
                            <td>quis</td>
                            <td>sem</td>
                            <td>at</td>
                        </tr>
                        <tr>
                            <td>1,006</td>
                            <td>nibh</td>
                            <td>elementum</td>
                            <td>imperdiet</td>
                            <td>Duis</td>
                        </tr>
                        <tr>
                            <td>1,007</td>
                            <td>sagittis</td>
                            <td>ipsum</td>
                            <td>Praesent</td>
                            <td>mauris</td>
                        </tr>
                        <tr>
                            <td>1,008</td>
                            <td>Fusce</td>
                            <td>nec</td>
                            <td>tellus</td>
                            <td>sed</td>
                        </tr>
                        <tr>
                            <td>1,009</td>
                            <td>augue</td>
                            <td>semper</td>
                            <td>porta</td>
                            <td>Mauris</td>
                        </tr>
                        <tr>
                            <td>1,010</td>
                            <td>massa</td>
                            <td>Vestibulum</td>
                            <td>lacinia</td>
                            <td>arcu</td>
                        </tr>
                        <tr>
                            <td>1,011</td>
                            <td>eget</td>
                            <td>nulla</td>
                            <td>Class</td>
                            <td>aptent</td>
                        </tr>
                        <tr>
                            <td>1,012</td>
                            <td>taciti</td>
                            <td>sociosqu</td>
                            <td>ad</td>
                            <td>litora</td>
                        </tr>
                        <tr>
                            <td>1,013</td>
                            <td>torquent</td>
                            <td>per</td>
                            <td>conubia</td>
                            <td>nostra</td>
                        </tr>
                        <tr>
                            <td>1,014</td>
                            <td>per</td>
                            <td>inceptos</td>
                            <td>himenaeos</td>
                            <td>Curabitur</td>
                        </tr>
                        <tr>
                            <td>1,015</td>
                            <td>sodales</td>
                            <td>ligula</td>
                            <td>in</td>
                            <td>libero</td>
                        </tr>
                    </tbody>
                </table>
            </div> -->
            <div id="UserTable">
                <h3>Registered Users</h3>
                <div class="table-responsive">
                <table class="table table-stripped table-sm">
                    <thead>
                        <!-- <th>ID</th> -->
                        <th>Username</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Admin</th>
                        <th>Mobile</th>
                        <th>Email Id</th>
                        <th>Image Path</th>
                    </thead>
                    <tbody>
                        {% for i in usrcrsr %}
                        <tr>
                            <!-- <td>{{ i["_id"] }}</td> -->
                            <td>{{ i["username"] }}</td>
                            <td>{{ i["first_name"] }}</td>
                            <td>{{ i["last_name"] }}</td>
                            <td>{{ i["admin"] }}</td>
                            <td>{{ i["mobile"] }}</td>
                            <td>{{ i["email"] }}</td>
                            <td>{{ i["image_file"] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% if user['admin']=='True' %}
                <a href='/delete_user'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 50px;">Delete User</button></a>
                {% endif %}
                </div>
            </div>
            <div id="CartTable" style="display: none;">
                <h3>Carts</h3>
                <div class="table-responsive">
                    <table class="table table-stripped table-sm">
                        <thead>
                            <th>ID</th>
                            <th>Status</th>
                            <th>Use</th>
                        </thead>
                        <tbody>
                            {% for i in crtcrsr %}
                            <tr>
                                <td>{{ i["_id"] }}</td>
                                <td>{{ i["status"] }}</td>
                                <td>{{ i["use"] }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% if user['admin']=='True' %}
                    <a href='/add_cart'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 50px;">Add Cart</button></a>
                    <a href='/cart_details'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 5px;">Update Cart</button></a>
                    <a href='/delete_cart'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 5px;">Delete Cart</button></a>
                    {% endif %}
                </div>
            </div>
            <div id="ProductTable" style="display: none;">
                <h3>Products</h3>
                <div class="table-responsive">
                    <table class="table table-stripped table-sm">
                        <thead>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Price</th>
                            <th>Barcode</th>
                            <th>Category</th>
                        </thead>
                        <tbody>
                            {% for i in prdcrsr %}
                            <tr>
                                <td>{{ i["_id"] }}</td>
                                <td>{{ i["name"] }}</td>
                                <td>{{ i["price"] }}</td>
                                <td>{{ i["barcode"] }}</td>
                                <td>{{ i["category"] }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% if user['admin']=='True' %}
                    <a href='/add_product'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 50px;">Add Product</button></a>
                    <a href='/product_details'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 5px;">Update Product</button></a>
                    {% endif %}
                </div>
            </div>
            <div id="CCTable" style="display: none;">
                <h3>Customer Cart</h3>
                <div class="table-responsive">
                    <table class="table table-stripped table-sm">
                        <thead>
                            <th>ID</th>
                            <th>Assignment Id</th>
                            <th>Cart Id</th>
                            <th>Used Date</th>
                            <th>Product Id</th>
                            <th>Quantity</th>
                            <th>Billing</th>
                        </thead>
                        <tbody>
                            {% for i in cccrsr %}
                            <tr>
                                <td>{{ i["_id"] }}</td>
                                <td>{{ i["assign_id"] }}</td>
                                <td>{{ i["cart_id"] }}</td>
                                <td>{{ i["used_date"] }}</td>
                                <td>{{ i["product_id"] }}</td>
                                <td>{{ i["quantity"] }}</td>
                                <td>{{ i["billing"] }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <a href='/add_customer_cart'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 50px;">Add Customer Cart</button></a>
                    {% if user['admin']=='True' %}
                    <a href='/customer_cart_details'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 5px;">View Cart Bill</button></a>
                    {% endif %}
                    <a href='/view_customer_cart_by_date'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 5px;">View Cart Details</button></a>
                </div>
            </div>
            <div id="BillingTable" style="display: none;">
                <h3>Billing</h3>
                <div class="table-responsive">
                    <table class="table table-stripped table-sm">
                        <thead>
                            <th>ID</th>
                            <th>Assignment Id</th>
                            <th>Cart Id</th>
                            <th>Date</th>
                            <th>Total Items</th>
                            <th>Total Amount</th>
                            <th>Customer Name</th>
                        </thead>
                        <tbody>
                            {% for i in bilcrsr %}
                            <tr>
                                <td>{{ i["_id"] }}</td>
                                <td>{{ i["assign_id"] }}</td>
                                <td>{{ i["cart_id"] }}</td>
                                <td>{{ i["date"] }}</td>
                                <td>{{ i["total_items"] }}</td>
                                <td>{{ i["total_amount"] }}</td>
                                <td>{{ i["cust_name"] }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <!-- <a href='/add_bill'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 50px;">Add Bill</button></a> -->
                    <a href='/billing_details'><button type="button" class="btn btn-outline-primary" style="float: right; margin-right: 5px;">View Bill</button></a>
                </div>
            </div>
        </main>
    </div>
</div>
{% else %}
<div class="row row-col-6" style="margin: 75px 50px; background-color: rgba(65, 146, 179, 0.1);">
    <div class="col card mx-auto d-block">
        <div class="card-body text-center" style="padding: 50px; margin: 50px;">
            <h3>First Log In to view contents of this page.!</h3><br>
            <form class="text-center">
                <a href="/login"><button type="button" class="btn btn-danger col-sm-6 text-center rounded-pill">Login Now</button></a>
            </form>
        </div>
    </div>
</div>
{% endif %}
<br>
{% endblock %}

{% block js %}
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="https://getbootstrap.com/docs/4.4/assets/js/vendor/jquery.slim.min.js"><\/script>')</script><script src="https://getbootstrap.com/docs/4.4/dist/js/bootstrap.bundle.min.js" integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
<script src="https://d14fo0winaifog.cloudfront.net/plotly-basic.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<!-- <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script> -->
<script type="text/javascript">
    // var graphs = {{ graphJSON|safe }}
    // var ids = {{ ids|safe }}
    // for(var i in graphs)
    // {
    //     Ploly.plot(ids[i], graphs[i].data, graphs[i].layout || {})
    // }
</script>
<script>
(function () {
    'use strict'
    
    feather.replace()
    
    // Graphs
    var ctx = document.getElementById('myChart')
    // eslint-disable-next-line no-unused-vars
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [
                'Sunday',
                'Monday',
                'Tuesday',
                'Wednesday',
                'Thursday',
                'Friday',
                'Saturday'
            ],
            datasets: [{
                data: [
                    15339,
                    21345,
                    18483,
                    24003,
                    23489,
                    24092,
                    12034
                ],
                lineTension: 0,
                backgroundColor: 'transparent',
                borderColor: '#007bff',
                borderWidth: 4,
                pointBackgroundColor: '#007bff'
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: false
                    }
                }]
            },
            legend: {
                display: false
            }
        }
    })
}())
</script>
<script>
    function usersTable()
    {
        var x = document.getElementById("UserTable");
        var a = document.getElementById("CartTable");
        var b = document.getElementById("ProductTable");
        var c = document.getElementById("CCTable");
        var d = document.getElementById("BillingTable");
        if (x.style.display === "none") 
        {
            x.style.display = "block";
            a.style.display = "none";
            b.style.display = "none";
            c.style.display = "none";
            d.style.display = "none";
        // } else {
        //     x.style.display = "none";
        }
    }

    function cartTable() {
    var x = document.getElementById("CartTable");
    var a = document.getElementById("UserTable");
    var b = document.getElementById("ProductTable");
    var c = document.getElementById("CCTable");
    var d = document.getElementById("BillingTable");
    if (x.style.display === "none") {
        x.style.display = "block";
        a.style.display = "none";
        b.style.display = "none";
        c.style.display = "none";
        d.style.display = "none";
    // } else {
    //     x.style.display = "none";
    }
    }

    function productTable() {
    var x = document.getElementById("ProductTable");
    var a = document.getElementById("CartTable");
    var b = document.getElementById("UserTable");
    var c = document.getElementById("CCTable");
    var d = document.getElementById("BillingTable");
    if (x.style.display === "none") {
        x.style.display = "block";
        a.style.display = "none";
        b.style.display = "none";
        c.style.display = "none";
        d.style.display = "none";
    // } else {
    //     x.style.display = "none";
    }
    }

    function ccTable() {
    var x = document.getElementById("CCTable");
    var a = document.getElementById("CartTable");
    var b = document.getElementById("ProductTable");
    var c = document.getElementById("UserTable");
    var d = document.getElementById("BillingTable");
    if (x.style.display === "none") {
        x.style.display = "block";
        a.style.display = "none";
        b.style.display = "none";
        c.style.display = "none";
        d.style.display = "none";
    // } else {
    //     x.style.display = "none";
    }
    }

    function billingTable() {
    var x = document.getElementById("BillingTable");
    var a = document.getElementById("CartTable");
    var b = document.getElementById("ProductTable");
    var c = document.getElementById("CCTable");
    var d = document.getElementById("UserTable");
    if (x.style.display === "none") {
        x.style.display = "block";
        a.style.display = "none";
        b.style.display = "none";
        c.style.display = "none";
        d.style.display = "none";
    // } else {
    //     x.style.display = "none";
    }
    }    
</script>
{% endblock %}
<!-- </body>
    </html> -->