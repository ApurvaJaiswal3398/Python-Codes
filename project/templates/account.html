{% extends 'layout.html' %}

{% block title %}{{ user["first_name"] }}{% endblock %}

{% block css %}
<style>
    .card{
        margin: 20px auto;
    }
</style>
{% endblock %}


{% block body %}
<!-- <br><br><br><br><br>{{ user }}<br><br><br><br><br> -->
<form method="post" enctype="multipart/form-data">
    <div class="row row-col-3" style="margin: 75px 50px; background-color: rgba(65, 146, 179, 0.1);">
        {% if logged_in %}
        <div class="col">
            <div class="card">
                <div class="card-body" style="padding: 50px;">
                    <h2 class="text-center">Personal Information</h2><br>
                    <div class="form-group">
                        <label for="fname">First Name :</label>
                        <input type="text" class="form-control" name="fname" id="fname" aria-describedby="fnameID" value="{{ user['first_name'] }}" style="background-color: white;" disabled>
                    </div>
                    <div class="form-group">
                        <label for="lname">Last Name :</label>
                        <input type="text" class="form-control" name="lname" id="lname" aria-describedby="lnameID" value="{{ user['last_name'] }}" style="background-color: white;" disabled>
                    </div>
                    <div class="form-group">
                        <label for="email">Email :</label>
                        <input type="email" class="form-control" name="email" id="email" aria-describedby="emailID" value="{% if pd['email'] %}{{ pd['email'] }}{% else %}{{ user['email'] }}{% endif %}">
                    </div>
                    <div class="form-group">
                        <label for="mobile">Mobile :</label>
                        <input type="text" class="form-control" name="mobile" id="mobile" aria-describedby="mobileID" value="{% if pd['mobile'] %}{{ pd['mobile'] }}{% else %}{{ user['mobile'] }}{% endif %}">
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card">
                <div class="card-body" style="padding: 50px;">
                    <h2 class="text-center">Profile Photo</h2><br>
                    <!-- <img src="/..{{ user['image_file'] }}" class="rounded-circle mx-auto d-block" style="height: 200px; width: 200px;"><br> -->
                    <img id="image" src="/..{{ user['image_file'] }}" alt="Profile Pic"  class="rounded-circle mx-auto d-block border" style="height: 200px; width: auto;"/>
                    <div class="form-group">
                        <label for="image_file">Choose Picture</label>
                        <input type="file" class="form-control-file btn-info" onchange="readURL(this);" name="image_file" id="image_file" accept="image/*" placeholder="Select A Picture" aria-describedby="imageID">
                        <small id="imageID" class="form-text text-muted">Select a square image or it may distort<br>current image : {{ user['image_file'] }}</small>
                        <!-- <input type='file' class="form-control-file btn-info" onchange="readURL(this);" name="image_file" id="image_file" placeholder="Select A Picture"/> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card">
                <div class="card-body" style="padding: 50px;">
                    <h2 class="text-center">Login Information</h2><br>
                    <div class="form-group">
                        <label for="uname">Username :</label>
                        <input type="text" class="form-control" name="uname" id="uname" aria-describedby="unameID" value="{% if pd['uname'] %}{{ pd['uname'] }}{% else %}{{ user['username'] }}{% endif %}">
                    </div>
                </div>
                <!-- <button type="submit" class="btn btn-danger">Save</button> -->
            </div>
            <div class="card">
                <div class="card-body" style="padding: 50px;">
                    <h2 class="text-center">Change Password</h2><br>
                    <div class="form-group">
                        <label for="oldpass">Old Password</label>
                        <input type="password" class="form-control" name="oldpass" id="oldpass" placeholder="Enter Old Password">
                    </div>
                    <div class="form-group">
                        <label for="newpass">New Password</label>
                        <input type="password" class="form-control" name="newpass" id="newpass" placeholder="Enter New Password">
                    </div>
                    <div class="form-group">
                        <label for="confpass">Confirm New Password</label>
                        <input type="password" class="form-control" name="confpass" id="confpass" placeholder="Confirm Password">
                    </div>
                </div>
            </div>
            <button class="btn btn-danger" style="margin: 10px; float: right;">Save</button>
        </div>
        {% else %}
        <div class="card mx-auto d-block">
            <div class="card-body text-center" style="padding: 50px; margin: 50px;">
                <h3>First Log In to view contents of this page.!</h3><br>
                <form method="POST" class="text-center">
                    <a href="/login"><button type="button" class="btn btn-danger col-sm-6 text-center rounded-pill">Login Now</button></a>
                </form>
            </div>
        </div>
        {% endif %}
    </div>
</form>
{% endblock %}

{% block js %}
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $("#image").attr("src", e.target.result);
            };
            reader.readAsDataURL(input.files[0]);
            // console.log(input.files[0].mozFullPath);
        }
    }
</script>
{% endblock %}